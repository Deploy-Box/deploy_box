{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="min-h-screen bg-zinc-950 relative overflow-hidden font-sans pb-24">
    <!-- Background Texture -->
    <div class="absolute inset-0 z-0 opacity-[0.03] pointer-events-none" style="background-image: radial-gradient(#ffffff 1px, transparent 1px); background-size: 32px 32px;"></div>

    <!-- Decorative background elements -->
    <div class="absolute top-0 left-0 w-full h-full overflow-hidden z-0 pointer-events-none">
        <div class="absolute top-[-10%] left-[-10%] w-[40rem] h-[40rem] bg-emerald-500/10 rounded-full blur-3xl"></div>
        <div class="absolute bottom-[-10%] right-[-10%] w-[40rem] h-[40rem] bg-teal-500/10 rounded-full blur-3xl"></div>
    </div>

    <!-- Content -->
    <div class="relative z-10 w-full max-w-4xl mx-auto px-4 md:px-8 pt-32 pb-12">
        
        <!-- Header -->
        <div class="text-center mb-16">
            <h1 class="text-4xl md:text-5xl font-black text-transparent bg-clip-text bg-gradient-to-r from-emerald-200 via-white to-emerald-200 font-manrope tracking-tight mb-6 pb-2 drop-shadow-sm">
                Manage Your Profile
            </h1>
            <p class="text-lg text-zinc-300 max-w-xl mx-auto font-light leading-relaxed">
                Update your account information and manage your security settings
            </p>
        </div>

        <div class="bg-zinc-900/80 backdrop-blur-xl border border-zinc-700/50 shadow-2xl rounded-3xl overflow-hidden p-8 md:p-12">
            
            <!-- Account Info -->
            <div class="mb-12">
                <h2 class="text-2xl font-bold text-white mb-8 flex items-center gap-3">
                    <span class="w-10 h-10 rounded-xl bg-emerald-500/20 flex items-center justify-center text-emerald-400 border border-emerald-500/20">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-user"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
                    </span>
                    Account Information
                </h2>
                
                <form id="userForm" class="space-y-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label for="username" class="block text-sm font-semibold text-zinc-300 mb-2">Username</label>
                            <input type="text" id="username" name="username"
                                class="w-full px-4 py-3 bg-black/40 border border-zinc-700 text-white placeholder-zinc-500 text-sm rounded-xl focus:outline-none focus:ring-2 focus:ring-emerald-500/50 focus:border-emerald-500 transition-all duration-300" 
                                placeholder="Update username" />
                        </div>

                        <div>
                            <label for="email" class="block text-sm font-semibold text-zinc-300 mb-2">Email</label>
                            <input type="email" id="email" name="email"
                                class="w-full px-4 py-3 bg-black/40 border border-zinc-700 text-white placeholder-zinc-500 text-sm rounded-xl focus:outline-none focus:ring-2 focus:ring-emerald-500/50 focus:border-emerald-500 transition-all duration-300"
                                placeholder="Update email" />
                        </div>
                    </div>

                    <div class="flex justify-end pt-4">
                        <button type="submit"
                            class="px-8 py-3 bg-emerald-500 hover:bg-emerald-400 text-zinc-950 text-sm font-bold rounded-xl transition-all duration-300 hover:shadow-[0_0_20px_rgba(16,185,129,0.3)] border border-transparent">
                            Update Profile
                        </button>
                    </div>
                </form>
            </div>

            <!-- Divider -->
            <div class="w-full h-px bg-zinc-800 my-10"></div>

            <!-- Security Settings -->
            <div class="mb-12">
                <h2 class="text-2xl font-bold text-emerald-400 mb-8 flex items-center gap-3">
                    <span class="w-8 h-8 rounded-lg bg-emerald-500/10 flex items-center justify-center text-emerald-500">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-shield-check"><path d="M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z"/><path d="m9 12 2 2 4-4"/></svg>
                    </span>
                    Security Settings
                </h2>
                
                <form id="resetForm" class="space-y-6">
                    <div>
                        <label for="resetEmail" class="block text-sm font-medium text-zinc-400 mb-2">Reset Password</label>
                        <div class="flex flex-col sm:flex-row gap-4">
                            <input type="email" id="resetEmail" name="resetEmail" required
                                class="flex-grow px-4 py-3 bg-zinc-950/50 border border-zinc-700 text-zinc-100 placeholder-zinc-600 text-sm rounded-xl focus:outline-none focus:ring-2 focus:ring-emerald-500/50 focus:border-emerald-500 transition-all duration-300"
                                placeholder="Enter your email to reset password" />
                            
                            <button type="button" id="resetPassword"
                                class="px-6 py-3 bg-zinc-800 hover:bg-zinc-700 text-emerald-400 text-sm font-bold rounded-xl transition-all duration-300 border border-zinc-700 whitespace-nowrap">
                                Request Password Reset
                            </button>
                        </div>
                    </div>
                </form>
            </div>

            <!-- Divider -->
            <div class="w-full h-px bg-zinc-800 my-10"></div>

            <!-- Danger Zone -->
            <div class="space-y-6">
                <div class="flex items-center justify-between flex-wrap gap-4">
                    <div>
                        <h2 class="text-xl font-bold text-red-500 mb-1">Danger Zone</h2>
                        <p class="text-sm text-zinc-500">Irreversible actions. Please proceed with caution.</p>
                    </div>
                    
                    <div class="flex gap-4">
                        <a href="{% url 'accounts:api-logout' %}"
                           class="px-6 py-2.5 bg-zinc-800 hover:bg-zinc-700 text-zinc-300 text-sm font-bold rounded-xl transition-all duration-300 border border-zinc-700">
                            Logout
                        </a>
                        <button type="button" id="deleteAccountBtn"
                            class="px-6 py-2.5 bg-red-500/10 hover:bg-red-500/20 text-red-500 hover:text-red-400 text-sm font-bold rounded-xl transition-all duration-300 border border-red-500/20">
                            Delete Account
                        </button>
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>

<!-- Delete Account Confirmation Modal -->
<div id="deleteModal" class="fixed inset-0 bg-black/80 backdrop-blur-sm hidden items-center justify-center z-50 p-4">
  <div class="bg-zinc-900 border border-zinc-800 rounded-2xl p-8 max-w-md w-full shadow-2xl relative overflow-hidden">
     <!-- Background Texture in Modal -->
     <div class="absolute inset-0 z-0 opacity-[0.03] pointer-events-none" style="background-image: radial-gradient(#ffffff 1px, transparent 1px); background-size: 32px 32px;"></div>

    <div class="relative z-10">
        <h3 class="text-xl font-bold text-red-500 mb-4 flex items-center gap-2">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/><path d="M12 9v4"/><path d="M12 17h.01"/></svg>
            Delete Account
        </h3>
        <p class="text-zinc-400 mb-8 leading-relaxed">
        Are you sure you want to delete your account? This action cannot be undone and will permanently remove all your data.
        </p>
        <div class="flex flex-col sm:flex-row gap-3">
        <button id="cancelDelete"
            class="flex-1 px-4 py-3 bg-zinc-800 hover:bg-zinc-700 text-zinc-300 rounded-xl font-bold transition duration-300 border border-zinc-700">
            Cancel
        </button>
        <button id="confirmDelete"
            class="flex-1 px-4 py-3 bg-red-600 hover:bg-red-500 text-white rounded-xl font-bold transition duration-300 shadow-[0_0_15px_rgba(220,38,38,0.3)]">
            Yes, Delete
        </button>
        </div>
    </div>
  </div>
</div>

<script src="{% static 'profile/script.js' %}"></script>
{% endblock %}
