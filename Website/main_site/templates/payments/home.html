{% extends 'base.html' %} {% load static %}

<head>
  {% block extra_head%}
  <script src="https://js.stripe.com/v3/"></script>
  {% endblock %}
</head>

{% block content %}
<!-- Payment Method Warning Banner -->
<div id="paymentMethodWarning" class="hidden fixed top-0 left-0 right-0 z-50 bg-red-600 text-white p-4 shadow-lg">
  <div class="max-w-7xl mx-auto flex items-center justify-between">
    <div class="flex items-center">
      <svg class="h-6 w-6 mr-3" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z" />
      </svg>
      <div>
        <h3 class="font-semibold">Payment Method Required</h3>
        <p class="text-sm opacity-90">You need to add a payment method to your organization before you can purchase stacks.</p>
      </div>
    </div>
    <div class="flex items-center space-x-4">
      <a id="addPaymentMethodLink" href="#" class="bg-white text-red-600 px-4 py-2 rounded-lg font-medium hover:bg-gray-100 transition-colors">
        Add Payment Method
      </a>
      <button onclick="dismissPaymentWarning()" class="text-white hover:text-gray-200">
        <svg class="h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
        </svg>
      </button>
    </div>
  </div>
</div>

<div class="pt-10 flex items-center justify-center text-3xl text-bold">
  <header>Purchase your Stack!</header>
</div>
<div class = "text-center mt-4">
  <select
  name="org_dropdown"
  id="org_dropdown"
  class="rounded-lg border-gray-900 text-gray-900"
  >
  <!-- Default Placeholder Option -->
  <option value="" selected disabled>Select an Organization</option>

  {% for organization in organizations %}
  <option id="org_choice" value="{{ organization.id }}">
    {{ organization.name }}
  </option>
  {% endfor %}
  </select>
  <select
  name="project_dropdown"
  id="project_dropdown"
  class="rounded-lg border-gray-900 text-gray-900"
  >
  <!-- Default Placeholder Option -->
  <option value="" selected disabled>Select an project</option>

  {% for project in projects %}
  <option
    id="proj_choice"
    value="{{ project.id }}"
    org_id="{{ project.organization_id }}"
  >
    {{ project.name }}
  </option>
  {% endfor %}
  </select>
</div>
{%for stack_option in stack_options%}
  <div class="p-4">
    <section class="section flex items-center justify-center">
      <div
        class="p-10 rounded-l-xl border border-blue-gray-100 rounded-xl bg-no-repeat lg:bg-contain bg-cover bg-right mb-5 w-2/3"
      >
        <p
          class="block antialiased font-sans text-sm font-light leading-normal text-blue-gray-900 font-bold mb-2"
        >
          Most Popuar Stack
        </p>
        <h3
          class="block antialiased tracking-normal font-sans text-3xl font-semibold leading-snug text-blue-gray-900"
        >
          {{stack_option.name}}
        </h3>
        <p
          class="block antialiased font-sans text-base font-light leading-relaxed text-inherit mt-2 mb-6 !text-base font-normal text-gray-500"
        >
        {{stack_option.description}}
        </p>
        <div>
          <button
            class="align-middle select-none font-sans font-bold text-center uppercase transition-all disabled:opacity-50 disabled:shadow-none disabled:pointer-events-none text-xs py-3 px-6 rounded-lg border border-gray-900 text-gray-900 hover:opacity-75 focus:ring focus:ring-gray-300 active:opacity-[0.85] flex-shrink-0"
            type="button"
            data-ripple-dark="true"
            id="submitBtn"
            data-stack-id="{{stack_option.id}}"
          >
            Purchase
          </button>
        </div>
      </div>
    </section>
  </div>
{%endfor%}
<script src="{% static 'payments/index.js' %}"></script>

{% endblock %}
